

trigger:
- master

pool:
  vmImage: 'vs2017-win2016'

steps:
- powershell: ./.tools/discord/sendwebhook.ps1 start $(WEBHOOK_URL)
  displayName: 'notify start'
- script: .paket\paket.exe restore --group Build
  displayName: 'restore packages'
- script: build.bat
  displayName: 'Run build'
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'BenchmarkDotNet.Artifacts\results'
    ArtifactName: 'EsiStatics.Benchmarks.Results'
    publishLocation: 'Container'
- powershell: ./.tools/discord/sendwebhook.ps1 success $(WEBHOOK_URL)
  displayName: 'notify success'